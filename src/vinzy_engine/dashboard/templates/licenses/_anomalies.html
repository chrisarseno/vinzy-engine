<table>
    <thead>
        <tr>
            <th>Time</th>
            <th>Type</th>
            <th>Severity</th>
            <th>Metric</th>
            <th>Z-Score</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        {% for a in anomalies %}
        <tr>
            <td>{{ a.created_at.strftime('%Y-%m-%d %H:%M') if a.created_at else "â€”" }}</td>
            <td>{{ a.anomaly_type }}</td>
            <td><span class="badge badge-{{ a.severity }}">{{ a.severity }}</span></td>
            <td><code>{{ a.metric }}</code></td>
            <td>{{ "%.2f"|format(a.z_score) }}</td>
            <td>
                {% if a.resolved %}
                <span class="badge badge-active">Resolved</span>
                {% else %}
                <button class="outline" style="padding:0.15rem 0.5rem;font-size:0.75rem"
                        hx-post="/dashboard/anomalies/{{ a.id }}/resolve"
                        hx-target="closest tr" hx-swap="outerHTML">
                    Resolve
                </button>
                {% endif %}
            </td>
        </tr>
        {% else %}
        <tr><td colspan="6"><em>No anomalies detected.</em></td></tr>
        {% endfor %}
    </tbody>
</table>
